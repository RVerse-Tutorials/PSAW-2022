<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 2. More Git</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RWorkflow</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="set-up.html">
    <span class="fa fa-clone"></span>
     
    Set-up
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-calendar"></span>
     
    Workshop Weekly Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1.html">
        <span class="fa fa-cogs"></span>
         
        Week 1 RStudio + Version Control
      </a>
    </li>
    <li>
      <a href="week2.html">
        <span class="fa fa-gitalt"></span>
         
        Week 2 More Git/GitHub
      </a>
    </li>
    <li>
      <a href="week3.html">
        <span class="fab fa-github"></span>
         
        Week 3 GitHub
      </a>
    </li>
    <li>
      <a href="week4.html">Week 4 R Markdown</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://rverse-tutorials.github.io/RWorkflow/">
    <span class="fa fa-folder"></span>
     
    Archive
  </a>
</li>
<li>
  <a href="https://rverse-tutorials.github.io/RWorkflow-NWFSC-2020">
    <span class="fa fa-clock"></span>
     
    2020 website
  </a>
</li>
<li>
  <a href="links.html">
    <span class="fa fa-info"></span>
     
    More resources
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RVerse-Tutorials/RWorkflow-NWFSC-2021">
    <span class="fab fa-github"></span>
     
    Repo
  </a>
</li>
<li>
  <a href="https://github.com/orgs/RWorkflow-Workshop-2021">Org</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Week 2. More Git</h1>

</div>


<table class="table" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Compartmentalized
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Documented
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Extendible
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Reproducible
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Robust
</td>
</tr>
</tbody>
</table>
<div id="overview" class="section level1">
<h1>Overview</h1>
<p>This week I will the basic Git/GitHub skills (and info) that are all most NMFS scientists will need.</p>
<p>Repository skills (using GitHub Desktop)</p>
<ul>
<li><p>Skill 1: Clone one of your GitHub repos onto your computer</p></li>
<li><p>Skill 2: Tell RStudio about a local repository</p></li>
<li><p>Skill 3: Commit local changes and push GitHub</p></li>
<li><p>How to clone someone else’s GitHub repository</p></li>
<li><p>How to use a repository as a template for something brand new.</p></li>
</ul>
<p>New definitions</p>
<ul>
<li>Fork or clone? What’s the difference?</li>
<li>What are branches and pull requests? Most of you don’t need this but you should know what this is.</li>
</ul>
<p>Key GitHub.com skills.</p>
<ul>
<li>How to use issues.</li>
<li>How to use releases.</li>
<li>How to use organizations—for yourself or a team.</li>
</ul>
<p>Tips to be aware of:</p>
<ul>
<li>How to issue a Git command in a terminal window.</li>
<li>Where the Git info is hidden in a repository.</li>
<li>How to deal with a merge conflict using GitHub Desktop</li>
</ul>
<p>Topics I won’t cover:</p>
<ul>
<li><strong>Branches</strong>. Very few NMFS scientists need this and working with branches is a recipe for headaches for most. I will add a video to the Week 2 notes if you need/want to know this. I do use branches but only on 2-3 repositories from the 40 or so that I maintain.</li>
<li>Working with Git from the <strong>command line</strong>. For most of you, you have no need for this and this is just a good way to mess up your repository. The exception is a few unique cases where you do need to issue a Git command (like <code>git push</code> first time you need to give RStudio your GitHub login).</li>
<li>How to do a <strong>pull requests</strong>. I’ll post a video. Most of you won’t need this.</li>
</ul>
</div>
<div id="examples" class="section level1">
<h1>Examples</h1>
<div id="college-scorecard" class="section level2">
<h2>College Scorecard</h2>
<p><a href="https://collegescorecard.ed.gov/">College Scorecard</a></p>
<p>This is not a bespoke website. It is a Jekyll site being generated from GitHub. All the data driving the College Scorescard is available on the GitHub repository maintained by the Department of Education.</p>
</div>
<div id="nmfs-fish-tools" class="section level2">
<h2>NMFS Fish Tools</h2>
<p><a href="https://nmfs-fish-tools.github.io/">https://nmfs-fish-tools.github.io/</a></p>
<p>Here is an example of one of the tools: <a href="https://nmfs-fish-tools.github.io/r4MAS/index.html">r4MAS</a></p>
<p>Again this is not a bespoke website. In this case, r4MASS is an R package and a tool called pkgdown was used to create this site which GitHub shows as webpage in your browser.</p>
</div>
</div>
<div id="schematic" class="section level1">
<h1>Schematic</h1>
<p><img src="images/git-intro-2.jpg" /></p>
</div>
<div id="skills" class="section level1">
<h1>Skills</h1>
<div id="review" class="section level2">
<h2>Review</h2>
<div id="needed-set-up" class="section level3">
<h3>Needed set-up</h3>
<ul>
<li>Install R, RStudio, and GitHub Desktop (or use RStudio Cloud)</li>
<li><em>Optional</em>: Tell RStudio where Git is installed</li>
</ul>
<p>###Create a blank repo on GitHub</p>
<ol style="list-style-type: decimal">
<li>Click the + in the upper left from YOUR GitHub page.</li>
<li>Click new and add the Readme file and .gitignore</li>
</ol>
</div>
</div>
<div id="skill-1-clone-your-repo-to-your-computer" class="section level2">
<h2>Skill 1: Clone your repo to your computer</h2>
<ol style="list-style-type: decimal">
<li>Copy the URL of your repo. <code>https://www.github.com/yourname/yourrepo</code></li>
<li>Open GitHub Desktop on your computer. Click File &gt; Clone Repository</li>
<li>Click URL in the box that pops up and paste in the URL above</li>
<li>Double check that you are saving the repo in the right place</li>
</ol>
</div>
<div id="skill-2-add-repo-to-rstudio" class="section level2">
<h2>Skill 2: Add repo to RStudio</h2>
<ol style="list-style-type: decimal">
<li>Open RStudio and click the project tab in the top right and select, <code>New Project</code>.</li>
<li>Select <code>Existing Directory</code> and navigate to the directory where you just saved the repo.</li>
<li>Click ‘Create project’</li>
</ol>
</div>
<div id="skill-3-commit-and-push-changes" class="section level2">
<h2>Skill 3: Commit and push changes</h2>
<p>In a RStudio project that is also a Git repository</p>
<ol style="list-style-type: decimal">
<li>Make some changes to a file or add a file.</li>
<li>Open GitHub Desktop, click the little checkboxes next to the changes.</li>
<li>Add a commit comment, commit.</li>
<li>Click Push at top to push the changes to GitHub</li>
</ol>
</div>
<div id="copy-a-repo-on-github" class="section level2">
<h2>Copy a repo on GitHub</h2>
<p>You can clone your own or other people’s repos.</p>
<ol style="list-style-type: decimal">
<li>In a browser, go to the GitHub repository you want to copy.</li>
<li>Copy its url.</li>
<li>Navigate to your GitHub page: click your icon in the upper right and then ‘your repositories’</li>
<li>Click the <code>+</code> in top right and click <code>import repository</code>. Paste in the url and give your repo a name.</li>
<li>Use Skill #1 to clone your new repo to your computer</li>
</ol>
<p><em>Optional</em> Method 2.</p>
<p>If RStudio knows where Git is, you can use this method.</p>
<p>Step 1-4 are the same.</p>
<ol start="5" style="list-style-type: decimal">
<li>Open RStudio and click the project tab in the top right and select, <code>New Project</code>. Then select <code>Version Control</code> and paste in the url of <strong>your</strong> repository’s url. For example, <code>https://github.com/&lt;youraccount&gt;/Test</code><br />
</li>
<li>Add the new repo to GitHub Desktop. Open GitHub Desktop, select File&gt;Add Local Repository and navigate to the folder with the new repository.</li>
</ol>
</div>
<div id="use-an-existing-repository-as-a-template-for-something-new" class="section level2">
<h2>Use an existing repository as a template for something new</h2>
<p>Let say you want to make a copy of one of your GitHub repositories and use it as a template to make something brand new.</p>
<ol style="list-style-type: decimal">
<li>Clone the repository that you will be building off of to GitHub</li>
<li>Use skill #1 to pull that repository onto your computer</li>
<li>Get rid of any files you don’t want in the new repo and use skill #3 to push those to GitHub.</li>
</ol>
</div>
<div id="pull-changes-on-github" class="section level2">
<h2>Pull changes on GitHub</h2>
<ol style="list-style-type: decimal">
<li>Click Pull in GitHub Desktop</li>
</ol>
</div>
<div id="make-an-existing-folder-on-your-computer-a-github-repository" class="section level2">
<h2>Make an existing folder on your computer a GitHub repository</h2>
<ol style="list-style-type: decimal">
<li>Use skill #1 to create a blank repo on GitHub and clone onto your computer</li>
<li>Copy the files you want to your new repository folder</li>
<li>Use skill #3 to push those to GitHub</li>
</ol>
<p>Note there are some easier ways to do this but the above is how to do it with your skills 1-3.</p>
<p>In <strong>GitHub Desktop</strong>, click File &gt; Add Local Repository… Then navigate to the folder and click that. GitHub Desktop will complain that there is no repository at that location but gives you option to ‘Create new repository’. Click that and answer questions. Then you’ll see ‘Publish to GitHub’ at the top. Click. Done! You can also do File &gt; New Repository but getting it to work on an existing folder is finicky and prone to unintended consequences.</p>
<p>In <strong>RStudio</strong>, Tools &gt; Project Options… &gt; Git/SVN &gt; use the dropdown to select Git. It’ll ask you to restart RStudio. Go to GitHub Desktop, click File &gt; Add Local Repository… Then navigate to the folder and click that. Then you’ll see ‘Publish to GitHub’ at the top. Click. Done!</p>
</div>
</div>
<div id="definitions" class="section level1">
<h1>Definitions</h1>
<div id="forking-versus-cloning" class="section level2">
<h2>Forking versus Cloning</h2>
<p>Forking is if you are contributing to someone else’s repository. In that case, you need to make ‘pull requests’. Pull request = ‘here is a suggested change’ request.</p>
<p>Cloning is if you want your own copy of the repository because you want to make your own version of the code or use it as a starting point for your own project. Or you need to clone a blank repository to get started on a project.</p>
</div>
<div id="merge-conflicts" class="section level2">
<h2>Merge conflicts</h2>
<p>Merge conflicts happen when there are changes to a file on your remote repository (GitHub) but also changes to that same file on your local repository. Git doesn’t know how to resolve the conflicting changes and needs your help. GitHub Desktop will warn you and give you some helpful options to resolve these.</p>
</div>
<div id="branches" class="section level2">
<h2>Branches</h2>
<p>A copy of your repository that you can work on without changing the main repository. Once you are done, you incorporate the changes into the main repository. <strong>Most of you should steer clear of branches</strong> because they are incompatible with our common workflows!! I maintain 40+ repositories and use branches on only 2 of them.</p>
<p>When your switch to a branch, i.e. <code>checkout</code> a branch, it changes the files in that folder to the state of the branch. The info to restore the files to the main branch state is in the <code>.git</code> folder.</p>
<p>Let’s say you have a repository (folder) for all your common functions, <code>common</code> and in that a folder called <code>R</code> with a function <code>basicplot.R</code>. You decide to create a branch to play around with some other options for <code>basicplot.R</code>. So you switch branches to branch <code>temp</code> and make some sandboxy changes to <code>basicplot.R</code>. Those changes are in your file system, not on some magic separate ‘branch’. Any call to like this in your other code is reading that sandboxy <code>basicplot.R</code>.</p>
<ul>
<li><code>source(</code>~/Documents/common/R/basicplot.R`)</li>
</ul>
<p>Let’s say you have you hard drive on an automatic backup system. It will backup the branch <code>temp</code>. The main branch info is in the <code>.git</code> folder but this will be pretty confusing if someone looks at the files.</p>
<p>For this reason, switching branches will reset the time stamp of <code>basicplot.R</code> when you switch back to the main branch.</p>
</div>
</div>
<div id="key-github-skills" class="section level1">
<h1>Key GitHub skills</h1>
<div id="issues" class="section level2">
<h2>Issues</h2>
<ul>
<li>Use the Issues in GitHub to enter any issues (bugs, feature changes, notes).</li>
<li>You can reference issues in your commits with #<num of the issue></li>
<li>Add code to your issue so you can easily recreate the problem.</li>
</ul>
</div>
<div id="releases" class="section level2">
<h2>Releases</h2>
<ul>
<li>The release or tag feature in GitHub will help you go back in time and document working states</li>
<li>Use a NEWS file to keep a notebook of all your major changes.</li>
</ul>
<p><em>Pro tip</em> checkout the state of the repository at the time of a release. From the terminal:</p>
<pre><code>git checkout v1.0</code></pre>
<p>When done:</p>
<pre><code>git switch -</code></pre>
<p>Warning <code>git checkout ...</code> will change all your time stamps.</p>
</div>
<div id="organizations" class="section level2">
<h2>Organizations</h2>
<p>I use this to organize collections of repositories.</p>
<ul>
<li>Share access to repos across a team</li>
<li>Have team discussions</li>
<li>Have a organization landing page</li>
</ul>
</div>
</div>
<div id="more-git-skills" class="section level1">
<h1>More Git skills</h1>
<div id="getting-rid-of-changes-you-have-made" class="section level2">
<h2>Getting rid of changes you have made</h2>
<p>Say you made a change and you need to get rid of that. The temptation (for me) is to jump onto the Git command line and clobber my repository with <code>reset</code> and <code>revert</code> commands. Don’t do this. Here are some strategies that will make this let prone to leaving your code a mess.</p>
<div id="have-you-commited-the-changes-yet" class="section level3">
<h3>Have you commited the changes yet?</h3>
<p><strong>No?</strong> Easy click on the file in GitHub Desktop, right click and click ‘Discard Changes…’. Note this will take things all the way back to your last commit!! If you have been making a bunch of changes without committing those, then you are out of luck.</p>
<p><strong>Yes?</strong> Go to History in the GitHub Desktop window, click on the commit and click ‘Revert’. This will get rid of all the changes that went with that commit. So if you changed multiple files, all those files will be reverted. If you have pushed the changes to GitHub, then you can push the revert and it’ll show up on GitHub too.</p>
</div>
<div id="resolving-merge-conflicts-with-github-desktop" class="section level3">
<h3>Resolving merge conflicts with GitHub Desktop</h3>
<p>GitHub Desktop makes resolving these pretty easy.</p>
<ol style="list-style-type: decimal">
<li>If it tells you to fetch commits off GitHub, go ahead and do that.</li>
<li>Now try to Pull. It’ll tell you that you have conflicts and give you options for what to do.</li>
</ol>
<div class="figure">
<img src="images/git-merge-conflict-gh.png" alt="" />
<p class="caption">GitHub Desktop merge conflict alert</p>
</div>
<ul>
<li>Click the ‘x’ and Git will alter <code>hello.R</code> and show where the conflicts are. You then edit <code>hello.R</code> in RStudio to fix the conflicts.</li>
<li>If you know what file you want to use, use the little arrow dropdown to use the file on GitHub or on your local machine.</li>
<li>Use Abort Merge to abandon the merge. Your changes to <code>hello.R</code> are still there.
<ul>
<li>Click on History, right click the commit and revert to get rid of it. All file changes that are part of that commit will disappear! You can revert the revert if needed.</li>
<li>Go into <code>hello.R</code> and fix the conflict. Git won’t have marked it so it might be hard to find.</li>
</ul></li>
</ul>
<p><strong>Those using Git in RStudio</strong> Merge conflicts are a bit of a disaster in RStudio, and RStudio gives no warning before it mucks up your files. So it you are pushing/pulling from RStudio be sure to practice on some toy merge conflicts before you run into a real one.</p>
</div>
</div>
<div id="recovering-a-single-file" class="section level2">
<h2>Recovering a single file</h2>
<p>Let’s say you made a big multi-file commit and you want to revert one file.</p>
<p>You can do this at the Git command line, but I find that to be a huge time suck and in my early Git days, I sometimes left my repository with a horrible problem that I could not fix and had to completely rebuild my repo. Since I don’t need to be a Git wizard, this is what I do when I want to go ‘back in time’ for a single file.</p>
<p>Assuming you have already pushed the changes up to GitHub</p>
<ul>
<li>Go to the repo on GitHub</li>
<li>Click ‘commits’ It’s a little icon above your code with a clock with a counter-clockwise arrow.</li>
<li>Scroll to the commit where the file was in the state you want (one before the last bad commit).</li>
<li>On the right click the <code>&lt; &gt;</code> to browse your repo at the state in time where your file was ok.</li>
<li>Click on the file and copy the text.</li>
<li>Go back to RStudio, open the file, and paste in the text from when it was good.</li>
</ul>
<p>If you have not pushed the changes up to GitHub.</p>
<ul>
<li>Now you have to go to the Git command line. Git tab in RStudio and then click the cog &gt; Shell.</li>
<li>Note, in 9 times out of 10, I would push the commit to GitHub and then use the above copy/paste to avoid using the Git command line. I would find that much faster.</li>
</ul>
<p>Ok, here’s the Git command to get a single file back. This works whether or not you have pushed to GitHub. The problem with this and why I don’t do it is that I usually need to look at the file. So I am scrolling back through the status of my repo in the past until I find the status that I want. Then I stare a bit and think and think. Then get a coffee and think some more. Then I scroll back through the status of the repo in the past some more and THEN I do the copy and paste. It is rarely the case that I know exactly what commit that I need to get rid of—and even rarer that I want to go completely to a status in the past.</p>
<ul>
<li>Open the Git bash shell</li>
<li><code>git log</code> to find the commit hash (the long number)</li>
<li><code>git checkout 1d0f8c2eb4e66db0a7123588ae2fad26a6338303~1 -- ./R/test.R</code> would reset test.R to one before that commit. This part <code>1d0f8c2eb4e66db0a7123588ae2fad26a6338303</code> is the bad commit hash and this part <code>~1</code> means what the file was like 1 commit before that.</li>
</ul>
<p>If you accidentally leave off the file name and Git says you have a detached head, use <code>git checkout master</code> to reattach your head.</p>
</div>
<div id="a-workflow-to-minimize-headaches" class="section level2">
<h2>A workflow to minimize headaches</h2>
<ul>
<li>Open GitHub Desktop</li>
<li>Do a pull from GitHub</li>
<li>Work</li>
<li>Commit changes and push up</li>
</ul>
<div id="starting-out" class="section level3">
<h3>Starting out</h3>
<ul>
<li>Don’t use branches when you are just starting. You might never need them.</li>
<li>Skills 1-3 are most of what anyone neeeds.</li>
<li>Get in the habit of always doing a Pull/Push before you start work in your project.</li>
</ul>
</div>
</div>
<div id="pro-tip" class="section level2">
<h2>Pro tip</h2>
<p><em>Time stamps</em> is something that you probably use to see when a file was last changed. Time stamps lose meaning if you use <code>git checkout</code> for branches or tags. In fact, in the Git-verse, time doesn’t exist since Git workflow is not necessarily linear. I find this very confusing so I purposely work in a linear fashion with Git.</p>
<p>To fix time stamps when you use <code>git checkout</code> (i.e. switch branches), you can use a <code>post-checkout</code> file in the <code>.git/hooks</code> folder.</p>
<ol style="list-style-type: decimal">
<li>Open <code>post-checkout.sample</code>. Save as <code>post-checkout</code></li>
<li>Copy this into that file</li>
</ol>
<pre><code>#!/bin/sh -e

OS=${OS:-`uname`}

if [ &quot;$OS&quot; = &#39;Darwin&#39; ]; then
  get_touch_time() {
    date -r ${unixtime} &#39;+%Y%m%d%H%M.%S&#39;
  }
else
  get_touch_time() {
    date -d @${unixtime} &#39;+%Y%m%d%H%M.%S&#39;
  }
fi

# all git files
git ls-tree -r --name-only HEAD &gt; .git_ls-tree_r_name-only_HEAD

# modified git files
git diff --name-only &gt; .git_diff_name-only

# only restore files not modified
comm -2 -3 .git_ls-tree_r_name-only_HEAD .git_diff_name-only | while read filename; do
  unixtime=$(git log -1 --format=&quot;%at&quot; -- &quot;${filename}&quot;)
  touchtime=$(get_touch_time)
  # echo ${touchtime} &quot;${filename}&quot;
  touch -t ${touchtime} &quot;${filename}&quot;
done

rm .git_ls-tree_r_name-only_HEAD .git_diff_name-only</code></pre>
</div>
</div>

<hr>

<div style="text-align: center">
<i class="fas fa-cubes"></i> NWFSC Math Bio Program <i class="fas fa-cubes"></i>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
