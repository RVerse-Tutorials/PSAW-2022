---
title: "Week 2: Coding Tips"
output:
  html_document:
    toc: true
    include:
      after_body: footer.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(kableExtra)
dt <- data.frame("Compartmentalized", "Documented", "Extendible", "Reproducible", "Robust")
kable(dt, col.names=NULL) %>%
  kable_styling(full_width = TRUE) %>%
  row_spec(1, bold = FALSE, color = "white", background = "blue") %>%
  column_spec(column = 1:5, width = "20%")
```


# Week 2. More Git + Better Coding Practices

This week I will cover more Git topics and basic coding habits that I have learned over the years. These are good habits that will help make your code less buggy and easier to extend.

### Agenda

Git, GitHub, GitLab

* How to clone someone else's GitHub or GitLab repository
* How to clone your own repository--when you want to make a copy and use that as a template for something new.
* What are branches, merge conflicts and pull requests?
* Fork or clone? What's the difference?
* How to add Git to an existing RStudio project and get that on GitHub or GitLab.

Coding Tips

* How to organize and plan your code and why adopting an 'object-oriented mindset' will help your code organization (regardless of whether you use object-oriented coding)
* What are namespaces and why you should use `::` to call functions.
* Tips on writing code and functions in R - little things that will make your code better and more robust
* Tips on things to avoid in your R code, i.e. quirks of R that will tend to create bugs

# Code Organization

## R is object oriented

Run this code.

```{r}
fit <- lm(dist ~ speed, data=cars)
class(fit)
```

"lm" is the class of the object "fit". R *knows* things to do with objects of class "lm".

```{r}
coef(fit)
```

It did that because there is a function `coef.lm` and R looks for that to see what to do when you pass a "lm" object to `coef()`.

All object of class "lm" are a list with a standard set of items in that list:

```{r}
names(fit)
```

That information contains all the information about the fit, the data used for the fit, and the call to `lm()`. We can just pass `fit` to `print()`, `plot()`, `summary()`, etc. I could write a new function, `foo.lm`, to do something new with a "lm" object. 

In the call to `lm`, we had another object, `saldat`. `saldat` is class `data.frame`. `lm()` knows what to do with data that is a data frame.

## Object-oriented mindset

Let's look at `salmon.R` [View here](salmon-script.html). What sort of elements are in this script?

* data
* fits
* predictions
* plots

But the elements are not like "objects". One data set is a data frame with column headings year, wild, flow, temp and the other is a matrix with years as column headings. The fits are all different types and some have no info about what years or data I fit to (see eg `fit3`). The plots have to be tweaked based on the data and the fits.

Let's think about how to make these stand-alone "objects". This is the time to get out your notebook.

We'll have a data processing function, a fitting function, a prediction function, and a plotting function. Each outputs an object with the necessary info needed by other functions (maybe we'll skip that for the plotting function).

