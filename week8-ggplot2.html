<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 8: Intro to ggplot</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RWorkflow</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="set-up.html">
    <span class="fa fa-clone"></span>
     
    Set-up
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-calendar"></span>
     
    Workshop Weekly Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1-rstudio.html">
        <span class="fa fa-cogs"></span>
         
        Week 1 RStudio + Version Control
      </a>
    </li>
    <li>
      <a href="week2-coding.html">
        <span class="fa fa-code"></span>
         
        Week 2 More Git + Code Organization
      </a>
    </li>
    <li>
      <a href="week3-RMarkdown.html">
        <span class="fa fa-file"></span>
         
        Week 3 R Markdown
      </a>
    </li>
    <li>
      <a href="week4-packages.html">
        <span class="fa fa-archive"></span>
         
        Week 4 R Packages
      </a>
    </li>
    <li>
      <a href="week5-roxygen.html">
        <span class="fa fa-question-circle"></span>
         
        Week 5 Roxygen
      </a>
    </li>
    <li>
      <a href="week6-more-packages.html">
        <span class="fa fa-folder"></span>
         
        Week 6 More Packages
      </a>
    </li>
    <li>
      <a href="week7-more-git.html">
        <span class="fa fa-git"></span>
         
        Week 7 More Git
      </a>
    </li>
    <li>
      <a href="week8-ggplot2.html">
        <span class="fa fa-plot"></span>
         
        Week 8 ggplot2
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-git"></span>
     
    Git
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro-git.html">
        <span class="fa fa-cogs"></span>
         
        Intro to Git + GitHub/Lab
      </a>
    </li>
    <li>
      <a href="more-git.html">
        <span class="fa fa-github"></span>
         
        More Git + GitHub
      </a>
    </li>
    <li>
      <a href="websites.html">
        <span class="fa fa-chrome"></span>
         
        Websites with GitHub
      </a>
    </li>
    <li>
      <a href="jekyll.html">
        <span class="fa fa-sitemap"></span>
         
        Dynamic Websites with Jekyll and GitHub
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-file"></span>
     
    RMarkdown
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week3-RMarkdown.html">
        <span class="fa fa-file"></span>
         
        R Markdown for Reports
      </a>
    </li>
    <li>
      <a href="bookdown.html">
        <span class="fa fa-book"></span>
         
        Bookdown
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-archive"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week4-packages.html">
        <span class="fa fa-archive"></span>
         
        R Packaging with RStudio
      </a>
    </li>
    <li>
      <a href="week5-roxygen.html">
        <span class="fa fa-question-circle"></span>
         
        Roxygen documentation
      </a>
    </li>
    <li>
      <a href="shiny.html">
        <span class="fa fa-gamepad"></span>
         
        Shiny GUIs
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="links.html">Tutorials</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RVerse-Tutorials/RWorkflow-NWFSC-2020">
    <span class="fa fa-github"></span>
     
    Repo
  </a>
</li>
<li>
  <a href="search.html">Search</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Week 8: Intro to ggplot</h1>

</div>


<table class="table" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Compartmentalized
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Documented
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Extendible
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Reproducible
</td>
<td style="text-align:left;color: white !important;background-color: blue !important;width: 20%; ">
Robust
</td>
</tr>
</tbody>
</table>
<p>This week I will give an introduction to plotting with <strong>ggplot</strong>. This is oriented to those with little or no experience using <strong>ggplot</strong> or those who have tried it and gotten frustrated. If you already use <strong>ggplot</strong>, you won’t find this session very interesting.</p>
<p>You will need to install the <strong>ggplot2</strong> package for this session.</p>
<pre class="r"><code>library(ggplot2)</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.6.3</code></pre>
<div id="basic-xy-plot" class="section level1">
<h1>Basic xy plot</h1>
<div id="workflow" class="section level2">
<h2>Workflow</h2>
<p>Let’s say you wanted to make a simple xy plot with <code>plot()</code>. Here’s your workflow.</p>
<ul>
<li>Decide on <span class="math inline">\(x\)</span> or use the default (1 to the number of data points).</li>
<li>Decide on <span class="math inline">\(y\)</span>.</li>
<li>Plot with <code>plot(x,y)</code></li>
</ul>
<pre class="r"><code>t &lt;- 1:10
val &lt;- rnorm(10)
plot(t, val, type=&quot;b&quot;)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Here’s your <code>ggplot()</code> workflow.</p>
<ul>
<li>Decide on <span class="math inline">\(x\)</span> or use the default (1 to the number of data points).</li>
<li>Decide on <span class="math inline">\(y\)</span>.</li>
<li>Make a data frame with <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>.</li>
<li>Create the plot object with a call to <code>ggplot()</code> to tell it the data frame and then what the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> to use. The latter is with <code>aes()</code> (aesthestics).</li>
<li>Add points or lines to the plot with <code>geom_line()</code> or <code>geom_point()</code>.</li>
</ul>
<pre class="r"><code>df &lt;- data.frame(t=t, val=val)
p1 &lt;- ggplot(df, aes(x=t, y=val)) #set up data and x and y
p2 &lt;- p1 + geom_point() # Tell it what to do with that (add a line)
p2 # plot it</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Typically you’d just write the call like so</p>
<pre><code>ggplot(df, aes(x=t, y=val)) + geom_point()</code></pre>
<p>But I assigned the calls to objects <code>p1</code> and <code>p2</code> so you can see that both are <strong>ggplot</strong> objects.</p>
<pre class="r"><code>class(p1)</code></pre>
<pre><code>## [1] &quot;gg&quot;     &quot;ggplot&quot;</code></pre>
<pre class="r"><code>class(p2)</code></pre>
<pre><code>## [1] &quot;gg&quot;     &quot;ggplot&quot;</code></pre>
<p>That feature is going to be super helpful because it means you can easily add elements to a ggplot without worrying about <span class="math inline">\(y\)</span> axis limits or figure sizing.</p>
<pre class="r"><code>p2 + geom_line()</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="modifying-your-points-and-lines" class="section level2">
<h2>Modifying your points and lines</h2>
<p>With <code>plot()</code>, you alter the points and lines with arguments passed to <code>plot()</code>.</p>
<ul>
<li><code>pch</code> (point type), <code>lty</code> (linetype), <code>type</code> (“l”, “b”, “p”), <code>lwd</code> (line width), <code>cex</code> (point size)</li>
</ul>
<pre class="r"><code>plot(t, val, type=&quot;b&quot;, lwd=2, lty=2,
     pch=21, col=&quot;red&quot;, cex=4, bg=&quot;blue&quot;)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>With <code>ggplot()</code>, the approach is quite different and the names are mostly totally different. A cheatsheet of things you commonly use will be helpful when start (I still use one).</p>
<p>There are two different workflows that you need to decide on.</p>
<ol style="list-style-type: decimal">
<li><em>Dynamic colors etc</em>: Let <code>ggplot()</code> pick your colors, points, line widths etc.</li>
<li><em>Fixed colors etc</em>: Manually choose your colors, points, line widths etc, aka use a fixed value.</li>
</ol>
<p>Gravitating to option 1 will make your life with <code>ggplot()</code> easier, but let’s start with option 2.</p>
<p><img src="images/Emblem-important-red.svg.png" alt="Important" /> <em>Fixed</em> lines, points attributes go <em>outside</em> of <code>aes()</code> in a <code>geom_...()</code> call. <em>Dynamic</em> attributes go <em>inside</em> of <code>aes()</code>.</p>
<p>Look at <code>?geom_point</code> to see the attributes that you can pass in.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) + geom_point(col=&quot;black&quot;)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>The length of the fixed attribute must be 1 or the length of the data.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) + 
  geom_point(shape=21, fill=&quot;blue&quot;, col=rep(1:2,5), size=6, alpha=.5, stroke=2)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Ways to set attributes that won’t work as you think:</p>
<p>Putting color outside of <code>aes()</code> in <code>ggplot()</code> does nothing. <code>ggplot()</code> sets up the data to use, but information outside <code>aes()</code> doesn’t flow to the plotting functions like <code>geom_point()</code>.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val), col=&quot;blue&quot;) + geom_point()</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Putting color inside of <code>aes()</code> in <code>ggplot()</code> has a non-intuitive effect. Plot attributes, like color, in <code>aes()</code> are converted to factors and the colors (etc) will be choosen dynamically. The name “blue” is not a color is the a factor and <code>ggplot()</code> gives the first factor the color red in this case. Information in <code>aes()</code> will <em>flow</em> to the rest of the plot unless you tell the <code>geom_point()</code> otherwise).</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val, color=&quot;blue&quot;)) + geom_point()</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>How do we <em>tell</em> <code>geom_point()</code> not to use the color value in <code>aes()</code> in <code>ggplot()</code>? Tell it to use a fixed value by putting <code>col="blue"</code> outside of an <code>aes()</code> call (in <code>geom_poin()</code>).</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val, col=&quot;blue&quot;)) + geom_point(col=&quot;blue&quot;)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>What happens if we put the color in <code>aes()</code> in <code>geom_point()</code>?</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) + geom_point(aes(color=&quot;blue&quot;))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Let’s make a plot with big red points and a thick blue line.</p>
<pre class="r"><code>p1 &lt;- ggplot(df, aes(x=t, y=val)) + 
  geom_line(col=&quot;blue&quot;, size=2) +
  geom_point(col=&quot;red&quot;, size=3)
p1</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Let’s add a column plot to that. I pass in <code>alpha</code> to add some transparency to the columns so they don’t wipe out the line.</p>
<pre class="r"><code>p1 + geom_col(alpha=0.5)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="modifying-your-labels-and-limits" class="section level2">
<h2>Modifying your labels and limits</h2>
<p>With <code>plot()</code>, you alter the labels and limits with arguments passed to <code>plot()</code>.</p>
<ul>
<li><code>xlab</code> and <code>ylab</code> (labels), <code>mail</code> (title), <code>ylim</code> and <code>xlim</code> (limits)</li>
</ul>
<pre class="r"><code>plot(t, val, type=&quot;p&quot;, xlab=&quot;time&quot;, ylab=&quot;value&quot;,
     xlim=c(-10,10), ylim=c(-5,5), main=&quot;plot plot&quot;)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>With <code>ggplot</code>, it’s pretty similar but you use functions.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) +
  geom_point() +
  xlab(&quot;time&quot;) + ylab(&quot;value&quot;) +
  ggtitle(&quot;ggplot plot&quot;) +
  xlim(c(-10,10)) + ylim(c(-5,5))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="changing-the-whole-look-of-your-plot" class="section level2">
<h2>Changing the whole look of your plot</h2>
<p><strong>ggplot</strong> uses themes to set the look of your plot and you can change the whole look by setting a different theme. You can also just tweak one element of the plot’s existing theme. Note because we fixed the line and point colors, we override some theme elements (eg, line colors). See <code>?theme_bw</code> to see all the themes. See <code>?theme</code> to learn how to change one element of your plot design.</p>
<pre class="r"><code>p1 + theme_classic()</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
</div>
<div id="adding-data-to-your-plot" class="section level1">
<h1>Adding data to your plot</h1>
<p>Let’s say you want to plot 2 lines.</p>
<div id="workflow-similar-to-plot" class="section level2">
<h2>Workflow similar to <code>plot()</code></h2>
<p>In <code>plot()</code> your workflow is</p>
<ul>
<li>Define <span class="math inline">\(x1\)</span> and <span class="math inline">\(x2\)</span> (if different)</li>
<li>Define <span class="math inline">\(y1\)</span> and <span class="math inline">\(y2\)</span></li>
<li>Plot <span class="math inline">\(y1\)</span> <em>with limits adjusted for the data we are adding</em>.</li>
<li>Add <span class="math inline">\(y2\)</span> to the plot.</li>
</ul>
<pre class="r"><code>val2 &lt;- val+1
plot(t, val, ylim=c(-3,3))
lines(t, val2)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>In <code>ggplot()</code> you have two possible workflows. First one could be like the <code>plot()</code> workflow. This will cause you problems if you later want to arrange these data into separate plots, but lets go ahead and do this. Sometimes this is the easiest way to get done what you need to do.</p>
<ul>
<li>Define <span class="math inline">\(x1\)</span> and <span class="math inline">\(x2\)</span> (if different)</li>
<li>Define <span class="math inline">\(y1\)</span> and <span class="math inline">\(y2\)</span></li>
<li>Make data frames <span class="math inline">\(df\)</span> and <span class="math inline">\(df2\)</span> for both.</li>
<li>Set up the plot with <code>ggplot()</code> and <span class="math inline">\(df\)</span></li>
<li>Add points with <code>geom_point()</code></li>
<li>Add <span class="math inline">\(df2\)</span> using <code>geom_line()</code> with <span class="math inline">\(df2\)</span> passed in and <code>aes()</code> call.</li>
</ul>
<p>How <code>aes()</code> is working. <code>aes()</code> information is flowing rightward. Everything to the right will inherit the data frame and <code>aes()</code> info unless you specifiy new data or new <code>aes()</code>.</p>
<pre class="r"><code>df2 &lt;- data.frame(t=t+2, val2=val+1)
ggplot(data=df, aes(x=t, y=val)) +
  geom_point() +
  geom_line(data=df2, aes(x=t, y=val2))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>This <em>inheriting</em> feature of <code>aes()</code> is great but can get you mixed up when you are layering data like this. Here I made a typo and used <code>val</code> instead of <code>val2</code> for y in the line. <code>ggplot</code> <em>helped</em> me out by using the data from <code>df</code> instead.</p>
<pre class="r"><code>ggplot(data=df, aes(x=t, y=val)) +
  geom_point() +
  geom_line(data=df2, aes(x=t, y=val))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Sometimes it is clearer if you keep the data and <code>aes()</code> with the points and lines. Note data and <code>aes()</code> will still inherit rightward.</p>
<pre class="r"><code>ggplot() +
  geom_point(data=df, aes(x=t, y=val)) +
  geom_line(data=df2, aes(x=t, y=val2))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="adding-and-modifying-the-legend" class="section level2">
<h2>Adding and modifying the legend</h2>
<p><strong>ggplot</strong> makes it rather hard to modify your legend if you create a plot this way. Creating a manual legend can be quite hacky. First thing to know is that the color, linestyle, and/or shape must be in <code>aes()</code> to appear in the legend. If it’s not there you can’t control it in the legend.</p>
<pre class="r"><code>ggplot() +
  geom_point(data=df, aes(x=t, y=val, col=&quot;df&quot;, linetype=&quot;df&quot;)) +
  geom_line(data=df2, aes(x=t, y=val2, col=&quot;df2&quot;, linetype=&quot;df2&quot;)) +
  scale_color_manual(&quot;name&quot;, values=c(&quot;blue&quot;, &quot;black&quot;)) +
  scale_linetype_manual(&quot;name&quot;,values=c(0,1))</code></pre>
<pre><code>## Warning: Ignoring unknown aesthetics: linetype</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="better-ggplot-workflow" class="section level2">
<h2>Better <strong>ggplot</strong> workflow</h2>
<p>This is how <code>ggplot()</code> is intended to be used</p>
<ul>
<li>Make data frames with <span class="math inline">\(df\)</span> and <span class="math inline">\(df2\)</span> data and a “name” column.</li>
<li>Set up the plot with <code>ggplot()</code></li>
<li>Make points or line different using the “name” column</li>
</ul>
<pre class="r"><code>df1 &lt;- data.frame(t=t, val=val, name=&quot;df1&quot;)
df2 &lt;- data.frame(t=t+5, val=val+1, name=&quot;df2&quot;)
df &lt;- rbind(df1, df2)
ggplot(df, aes(x=t, y=val, col=name, shape=name)) + 
  geom_line() +
  geom_point()</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Things to remember</p>
<ul>
<li>If the color, shape, linetype is not in an <code>aes()</code> it won’t appear in the legend.</li>
<li><code>aes()</code> info in <code>ggplot()</code> flows to the other elements. Put the <code>aes()</code> info in the individual <code>geom_...()</code> calls if you don’t want that.</li>
<li>Want to mix points and lines? You need to use <code>scale_..._manual()</code> to manually turn-off points of lines for some of the data.</li>
<li>You can always force colors, shapes, linetypes by passing in color, shape, size etc outside of <code>aes()</code> but it won’t appear in the legend.</li>
</ul>
<p>Example, points are all black since the <code>aes(col=name)</code> only appears in the <code>geom_line()</code> call.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) + 
  geom_line(aes(col=name)) +
  geom_point(aes(shape=name))</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div id="modifying-the-legend" class="section level3">
<h3>Modifying the legend</h3>
<p>You can control all aspects of the legend. Read up on it <a href="http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/">here</a>.</p>
<p>Making some data points and other lines will require <code>scale_...()</code> and gets hacky.</p>
<pre class="r"><code>ggplot(df, aes(x=t, y=val)) + 
  geom_line(aes(col=name, linetype=name)) +
  geom_point(aes(shape=name)) +
  scale_color_manual(&quot;name&quot;, values=c(&quot;blue&quot;, &quot;black&quot;)) +
  scale_shape_manual(&quot;name&quot;,values=c(NA,1)) +
  scale_linetype_manual(&quot;name&quot;,values=c(1,0))</code></pre>
<pre><code>## Warning: Removed 10 rows containing missing values (geom_point).</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>Ack all those NA warnings!</p>
<pre class="r"><code>df &lt;- data.frame(x=1:10, y=c(1,NA,NA,4:10), name=rep(c(&quot;a&quot;,&quot;b&quot;),5))
ggplot(df, aes(x=x, y=y, col=name)) + 
  geom_point()</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Get rid of them using <code>na.rm=TRUE</code>.</p>
<pre class="r"><code>ggplot(df, aes(x=x, y=y, col=name)) + 
  geom_point(na.rm=TRUE)</code></pre>
<p><img src="week8-ggplot2_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="arranging-plots-into-grids" class="section level1">
<h1>Arranging plots into grids</h1>
</div>

<hr>

<div style="text-align: center">
<i class="fas fa-cubes"></i> NWFSC Math Bio Program <i class="fas fa-cubes"></i>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
