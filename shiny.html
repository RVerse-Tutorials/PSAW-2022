<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Shiny Applications</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RWorkflow</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="set-up.html">
    <span class="fa fa-clone"></span>
     
    Set-up
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-calendar"></span>
     
    Workshop Weekly Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1-rstudio.html">
        <span class="fa fa-cogs"></span>
         
        Week 1 RStudio + Version Control
      </a>
    </li>
    <li>
      <a href="week2-coding.html">
        <span class="fa fa-code"></span>
         
        Week 2 More Git + Code Organization
      </a>
    </li>
    <li>
      <a href="week3-RMarkdown.html">
        <span class="fa fa-file"></span>
         
        Week 3 R Markdown
      </a>
    </li>
    <li>
      <a href="week4-packages.html">
        <span class="fa fa-archive"></span>
         
        Week 4 R Packages
      </a>
    </li>
    <li>
      <a href="week5-roxygen.html">
        <span class="fa fa-question-circle"></span>
         
        Week 5 Roxygen
      </a>
    </li>
    <li>
      <a href="week6-more-packages.html">
        <span class="fa fa-folder"></span>
         
        Week 6 More Packages
      </a>
    </li>
    <li>
      <a href="week7-more-git.html">
        <span class="fa fa-git"></span>
         
        Week 7 More Git
      </a>
    </li>
    <li>
      <a href="week8-ggplot2.html">
        <span class="fa fa-image"></span>
         
        Week 8 ggplot2
      </a>
    </li>
    <li>
      <a href="week9-data-wrangling.html">
        <span class="fa fa-broom"></span>
         
        Week 9 tidyverse
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-git"></span>
     
    Git
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro-git.html">
        <span class="fa fa-cogs"></span>
         
        Intro to Git + GitHub/Lab
      </a>
    </li>
    <li>
      <a href="more-git.html">
        <span class="fa fa-github"></span>
         
        More Git + GitHub
      </a>
    </li>
    <li>
      <a href="websites.html">
        <span class="fa fa-chrome"></span>
         
        Websites with GitHub
      </a>
    </li>
    <li>
      <a href="jekyll.html">
        <span class="fa fa-sitemap"></span>
         
        Dynamic Websites with Jekyll and GitHub
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-file"></span>
     
    RMarkdown
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week3-RMarkdown.html">
        <span class="fa fa-file"></span>
         
        R Markdown for Reports
      </a>
    </li>
    <li>
      <a href="bookdown.html">
        <span class="fa fa-book"></span>
         
        Bookdown
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-archive"></span>
     
    R Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week4-packages.html">
        <span class="fa fa-archive"></span>
         
        R Packaging with RStudio
      </a>
    </li>
    <li>
      <a href="week5-roxygen.html">
        <span class="fa fa-question-circle"></span>
         
        Roxygen documentation
      </a>
    </li>
    <li>
      <a href="shiny.html">
        <span class="fa fa-gamepad"></span>
         
        Shiny GUIs
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="links.html">Tutorials</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RVerse-Tutorials/RWorkflow-NWFSC-2020">
    <span class="fa fa-github"></span>
     
    Repo
  </a>
</li>
<li>
  <a href="search.html">Search</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Shiny Applications</h1>

</div>


<p><a href="https://shiny.rstudio.com/">shiny applicatons</a> are a GUI (graphical user interface) that can run a R-based application. You can then post this online and it will run from an R server (not your computer). Users can run your application from the web without having to install R. In fact they can run from any browser, for example a smart phone. Alternatively, you can just have it in a package and provide it as a way for users to run analyses when they use your package from R.</p>
<div id="fisheries-examples" class="section level2">
<h2>Fisheries examples</h2>
<p>Here are two example shiny apps that we have at the NWFSC. They are simple but are intended mainly to allow users to run standard analyses or explore data. shiny applications can be quite sophisticated and ‘shiny’. Search online for ‘shiny demos’.</p>
<ul>
<li><a href="https://dataexplorer.northwestscience.fisheries.noaa.gov/fisheye/NetRevExplorer/">Fisheries Economics Data Explorer</a>
<ul>
<li>Proprietary data</li>
</ul></li>
<li><a href="https://dataexplorer.northwestscience.fisheries.noaa.gov/nwc/agTrend/">Steller Sea Lion Trend Estimation</a>
<ul>
<li>Needed specialized add-on software</li>
</ul></li>
</ul>
<p>The U.S. Geological Survey (a U.S. federal agency) also it active in developing tools to be used by the public and serves these on its <a href="http://usgs-r.github.io/">usgs-r.github.io</a> organizational site. They have been active in using Shiny apps for data exploration.</p>
<ul>
<li><a href="https://lebs.shinyapps.io/western-basin/">Lake Erie Fish Survey</a> - <a href="https://github.com/taylorstewart/lebs-western-basin-app">code</a></li>
<li><a href="http://usgs-r.github.io/toxEval/index.html">toxEval</a></li>
</ul>
</div>
<div id="make-your-first-shiny-app" class="section level2">
<h2>Make your first shiny app</h2>
<ol style="list-style-type: decimal">
<li>Install the shiny package.</li>
</ol>
<pre><code>install.packages(&quot;shiny&quot;)</code></pre>
<ol style="list-style-type: decimal">
<li>Click File &gt; New &gt; Shiny Web App…</li>
<li>Select a location to put the application folder.</li>
<li>Select “Multiple File”. You can choose single file, but I will demo the separate case with a separate file for the interface code and ‘workhorse’ code.</li>
<li>Give you application a name.</li>
<li>When the files ‘ui.R’ and ‘server.R’ open, click ‘Run App’.</li>
</ol>
<p>That’s it. You made a shiny application. To stop the app, close the window or hit ESC at the command line in RStudio.</p>
</div>
<div id="ui.r-file" class="section level2">
<h2>ui.R file</h2>
<p>This is the code that specifies the graphical interface.</p>
<pre><code># Define UI for application that draws a histogram
shinyUI(fluidPage(
  
  # Application title
  titlePanel(&quot;Old Faithful Geyser Data&quot;),
  
  # Sidebar with a slider input for number of bins 
  sidebarLayout(
    sidebarPanel(
       sliderInput(&quot;bins&quot;,
                   &quot;Number of bins:&quot;,
                   min = 1,
                   max = 50,
                   value = 30)
    ),
    
    # Show a plot of the generated distribution
    mainPanel(
       plotOutput(&quot;distPlot&quot;)
    )
  )
))</code></pre>
</div>
<div id="server.r" class="section level2">
<h2>server.R</h2>
<p>This part has the R code that does the analysis, makes plots, makes table, etc.</p>
<pre><code>shinyServer(function(input, output) {
   
  output$distPlot &lt;- renderPlot({
    
    # generate bins based on input$bins from ui.R
    x    &lt;- faithful[, 2] 
    bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)
    
    # draw the histogram with the specified number of bins
    hist(x, breaks = bins, col = &#39;darkgray&#39;, border = &#39;white&#39;)
    
  })
  
})</code></pre>
</div>
<div id="what-can-shiny-apps-do-and-how-can-i-copy-that" class="section level2">
<h2>What can shiny apps do and how can I copy that?</h2>
<p>Go to the <a href="https://shiny.rstudio.com/gallery/">RStudio shiny gallery</a>, scroll down to the “Start Simple” section and start there. Once you want to add some more sections to your app, look lower at the Widgets sections. The code for the examples is there.</p>
<p>You’ll also want to go through RStudio’s <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">online tutorial</a> for shiny apps.</p>
<p>Development of anything past a fairly simple shiny app is quite time-consuming. This is a task that I outsource.</p>
</div>
<div id="putting-your-application-online" class="section level2">
<h2>Putting your application online</h2>
<p>NW Fisheries Science Center (where I work) has its own R Shiny Server because we has applications with proprietary data that cannot be put on non-NOAA server. In addition, many of our applications require specialized extra software for fitting Bayesian models. Thus our application need more than just R packages.</p>
<p>However, if your application does not have these special constraints, you can host online for free with <a href="http://www.shinyapps.io/">http://www.shinyapps.io/</a>.</p>
<p>Follow the instructions <a href="https://shiny.rstudio.com/articles/shinyapps.html">here</a>. In summary:</p>
<ol style="list-style-type: decimal">
<li><p>Sign up for an account at <a href="http://www.shinyapps.io/">http://www.shinyapps.io/</a></p></li>
<li><p>install the rsconnect package</p></li>
</ol>
<pre><code>install.packages(&quot;rsconnect&quot;)
library(rsconnect)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>Login into your account at <a href="http://www.shinyapps.io/">http://www.shinyapps.io/</a>. Click on your user name in top right, and click ‘Tokens’</p></li>
<li><p>A window should popup with code that looks like</p></li>
</ol>
<pre><code>rsconnect::setAccountInfo(name=&quot;&lt;ACCOUNT&gt;&quot;, token=&quot;&lt;TOKEN&gt;&quot;, secret=&quot;&lt;SECRET&gt;&quot;)</code></pre>
<p>Click ‘Copy to clipboard’.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Paste that code into the command line in R.</p></li>
<li><p>From R, click on the <code>ui.R</code> or <code>server.R</code> file. Click ‘Run App’. You should see a ‘Publish’ button in the top right. Click that. Select ‘shinyapps.io’ and log into your account.</p></li>
<li><p>When your app opens, copy the url to the app.</p></li>
</ol>
</div>
<div id="adding-a-shiny-app-to-your-r-package" class="section level2">
<h2>Adding a shiny app to your R package</h2>
<ol style="list-style-type: decimal">
<li><p>In your DESCRIPTION file, add ‘shiny’ to the list of packages in the ‘Imports:’ line.</p></li>
<li><p>Create a folder called ‘inst’ in your package.</p></li>
<li><p>Create a folder called ‘shiny’ in that.</p></li>
<li><p>Within that folder, put your folder with all your application files. ‘ui.R’, ‘server.R’, any data files, any function files.</p></li>
<li><p>Add the following code to a files called <code>launchApp.R</code> to your R directory. Change “myapp” and “mypackage” to the right names.</p></li>
</ol>
<pre><code>#&#39; @export
launchApp &lt;- function(x=&quot;myapp&quot;) {
  appDir &lt;- system.file(&quot;shiny&quot;, &quot;myapp&quot;, package = &quot;mypackage&quot;)
  shiny::runApp(appDir, display.mode = &quot;normal&quot;)
}</code></pre>
<p>Rebuild your package. If later you add more shiny apps, but their folder in the shiny directory too. You run them with <code>launchApp("mynewapp")</code>.</p>
<ol start="4" style="list-style-type: decimal">
<li>To run</li>
</ol>
<pre><code>library(mypackage)
runIt(&quot;myapp&quot;)</code></pre>
<p>Replace ‘mypackage’ and ‘myapp’ with the right names.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
