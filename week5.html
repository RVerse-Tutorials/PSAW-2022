<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 5</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RWorkflow</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="set-up.html">
    <span class="fa fa-clone"></span>
     
    Set-up
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-calendar"></span>
     
    Workshop Weekly Notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="week1.html">
        <span class="fa fa-cogs"></span>
         
        Week 1 RStudio + Version Control
      </a>
    </li>
    <li>
      <a href="week2.html">
        <span class="fab fa-github-alt"></span>
         
        Week 2 More Git/GitHub
      </a>
    </li>
    <li>
      <a href="week3.html">
        <span class="fab fa-github"></span>
         
        Week 3 GitHub
      </a>
    </li>
    <li>
      <a href="week4.html">
        <span class="fa fa-file-code"></span>
         
        Week 4 R Markdown
      </a>
    </li>
    <li>
      <a href="week5.html">
        <span class="fa fa-chart-line"></span>
         
        Week 5 ggplot2
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="https://rverse-tutorials.github.io/RWorkflow/">
    <span class="fa fa-folder"></span>
     
    Archive
  </a>
</li>
<li>
  <a href="https://rverse-tutorials.github.io/RWorkflow-NWFSC-2020">
    <span class="fa fa-clock"></span>
     
    2020 website
  </a>
</li>
<li>
  <a href="noaa.html">
    <span class="fa fa-fish"></span>
     
    NOAA
  </a>
</li>
<li>
  <a href="links.html">
    <span class="fa fa-info"></span>
     
    More resources
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RVerse-Tutorials/RWorkflow-NWFSC-2021">
    <span class="fab fa-github"></span>
     
    Repo
  </a>
</li>
<li>
  <a href="https://github.com/orgs/RWorkflow-Workshop-2021">Org</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Week 5</h1>

</div>


<div id="intro-to-ggplot2" class="section level2">
<h2>Intro to <strong>ggplot2</strong></h2>
<ul>
<li><a href="https://youtu.be/MjbkJjB31kA">Lecture video</a></li>
<li><a href="week5-ggplot2.html">The lecture notes</a></li>
</ul>
<p><em>Note</em> in the Q&amp;A (and more briefly in the lecture), I talked about data from the data frame specified in <code>ggplot(data=df)</code> flowing into <code>geom_...(data=df2)</code>. That doesn’t actually happen. See the notes below.</p>
<div id="more-ggplot2" class="section level3">
<h3>More <strong>ggplot2</strong></h3>
<p>The lecture is to introduce you to the way that <strong>ggplot2</strong> is structured because it is quite different to base plotting in R and it takes some getting used to. Once you are ready to go more indepth, here is some material that I have found useful.</p>
<ul>
<li><a href="https://tidyverse-intro.github.io/1-ggplot2.html">Review of the material</a> I touched on about the ‘grammar’ of <strong>ggplot2</strong>.</li>
<li><a href="https://bookdown.org/agrogankaylor/quick-intro-to-ggplot2/quick-intro-to-ggplot2.html">Another presentation of my material</a></li>
<li>Once you have got the basics down, you can stop there. That’ll get you 99% of what you need. Or Google “intro to ggplot2” or “ggplot2 gallery” and you’ll find many books and examples.</li>
</ul>
</div>
<div id="tidyverse" class="section level3">
<h3><strong>tidyverse</strong></h3>
<p>I am not going to cover data-wrangling with <strong>tidyverse</strong>, but that is also a key skill for data science. I am not covering it because I think that is something that is not well suited to a 1 hour lecture. Here are some links to get you started:</p>
<ul>
<li>My 2020 “<a href="https://rverse-tutorials.github.io/RWorkflow-NWFSC-2020/week9-data-wrangling.html">Intro to tidyverse</a>” lecture.</li>
<li>I like this <a href="https://dcl-wrangle.stanford.edu/">Data Wrangling</a> book</li>
<li>And this one <a href="https://tidyverse-intro.github.io/3-dplyr.html">Intro to dplyr</a> and <a href="https://tidyverse-intro.github.io/4-tidy.html">Intro to tidyverse</a></li>
<li>Hadley’s <a href="https://r4ds.had.co.nz/index.html">R for Data Science book</a> with the <a href="https://jrnold.github.io/r4ds-exercise-solutions/">exercise solutions</a> is good a deep dive.</li>
<li><a href="https://www.datacamp.com/courses/introduction-to-the-tidyverse">DataCamp course</a> if you learn better from courses.</li>
</ul>
</div>
</div>
<div id="q-a" class="section level2">
<h2>Q &amp; A</h2>
<div id="ggplot-does-respect-datadf" class="section level3">
<h3>ggplot does respect <code>data=df</code></h3>
<p><em>Note</em> In the Q&amp;A, I was talking about problems with inheriting data frame information when you have multiple data frames in your <code>ggplot()</code> code. Basically, I implied that your ggplot code doesn’t always respect something like <code>geom_line(data=df1)</code> and would use the data frame defined in the <code>ggplot()</code> part of your code. That is not true.</p>
<p>In my example it appeared to do so but it was actually using <code>val</code> that I had defined earlier in my environment.</p>
<p>So this code will properly throw an error because <code>df2</code> does not have <code>y</code>. Note, I use <code>data=df</code> in the <code>ggplot()</code> call so you clearly see what is <code>data</code> in the function calls.</p>
<pre class="r"><code>library(ggplot2)
df &lt;- data.frame(x=1:10, y=1:10, x2=1:10+2, y2=1:10+2)
df2 &lt;- data.frame(x=df$x+10, y2=df$y)
ggplot(data=df, aes(x=x, y=y)) + geom_point(data=df2)</code></pre>
<pre><code>## Error in FUN(X[[i]], ...): object &#39;y&#39; not found</code></pre>
<p>If I define <code>y</code>, then R will use that. But it doesn’t use the <code>x</code> that I also defined, because the data in <code>ggplot()</code> is searched first.</p>
<pre class="r"><code>y &lt;- 1
x &lt;- 1
ggplot(data=df, aes(x=x, y=y)) + geom_point(data=df2)</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Being more specific in my <code>aes()</code> call tells R not to go looking for <code>x</code> and <code>y</code> outside the data frame specified by the <code>data</code> argument and the code properly throws an error.</p>
<pre class="r"><code>ggplot(data=df, aes(x=.data$x, y=.data$y)) + geom_point(data=df2)</code></pre>
<pre><code>## Error: Column `y` not found in `.data`</code></pre>
<p>Note what is happening in this code: * The <code>geom_line()</code> has a new data defined in <code>data=df2</code> * But it doesn’t have its needed aesthetics (x and y), so it inherits that from <code>ggplot()</code>.</p>
<p>Sometimes specifying your <code>aes()</code> in your <code>geom_...()</code> part using <code>.data</code> is not enough because there are other aesthetics that are flowing through and you don’t want those. In that case, <code>inherit.aes=FALSE</code> can be helpful. Here I don’t want <code>aes(color="a")</code> to be inherited.</p>
<pre class="r"><code>df &lt;- data.frame(x=1:10, y=1:10, x2=1:10+2, y2=1:10+2)
df2 &lt;- data.frame(x=df$x+10, y2=df$y)
ggplot(data=df, aes(x=.data$x, y=.data$y, color=&quot;a&quot;)) + 
  geom_point(data=df2, aes(x=.data$x, y=.data$y2), inherit.aes=FALSE)</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="making-your-ggplot2-code-more-robust" class="section level3">
<h3>Making your ggplot2 code more robust</h3>
<p>Once you have multiple data frames in your code, it is very easy to introduce bugs that take hours to track down. It is really hard to keep track of what data frame is being inherited and how the aesthetics are being inherited.</p>
<p>Look at this code. What data is <code>geom_point()</code> using? What aesthetics are <code>geom_line()</code> and <code>geom_col()</code> using? This code works but writing code like this can drive you crazy later on.</p>
<pre class="r"><code>df1=data.frame(abc=1:10, xyz=1:10+rep(1:2,5), xyz2=1:10)
df2=data.frame(abc=1:10, xyz=0.5*df1$xyz, xyz2=0.25*df1$xyz, name=letters[rep(1:2,5)])
ggplot(df1, aes(x=abc, y=xyz)) + 
  geom_line(data=df2, aes(color=name)) + 
  geom_point(aes(y=xyz))</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<ul>
<li><code>geom_line()</code> is <code>geom_line(data=df2, aes(x=abc, y=xyz, color=name)</code>. The <code>aes(x=abc, y=xyz)</code> is inherited from <code>ggplot()</code> and <code>aes(color=name)</code> is specified in the call.</li>
<li><code>geom_point()</code> is <code>geom_point(data=df1, aes(x=abc, y=xyz2)</code>. <code>data=df1</code> and <code>aes(x=abc)</code> are inherited from <code>ggplot()</code> and <code>aes(y=xyz2)</code> is specified in the call. <code>aes(color=name)</code> is not inherited from the <code>geom_line()</code> above.</li>
</ul>
<p>What happens if I had written very similar code but like this.</p>
<pre class="r"><code>df1=data.frame(abc=1:10, xyz=1:10+rep(1:2,5), xyz2=1:10)
df2=data.frame(abc=1:10, xyz=0.5*df1$xyz, xyz2=0.25*df1$xyz, name=letters[rep(1:2,5)])
ggplot(df2, aes(x=abc, y=xyz, color=name)) + 
  geom_line() + 
  geom_point(data=df1, aes(y=xyz2))</code></pre>
<pre><code>## Error in FUN(X[[i]], ...): object &#39;name&#39; not found</code></pre>
<p>Why does this throw an error now??</p>
<ul>
<li><code>geom_line()</code> is <code>geom_line(data=df2, aes(x=abc, y=xyz, color=name)</code>. It inherited the data and <code>aes()</code> from <code>ggplot()</code>.</li>
<li><code>geom_point()</code> is <code>geom_point(data=df1, aes(x=abc, y=xyz2, color=name)</code>. <code>data=df1</code> and <code>aes(x=abc, color=name)</code> are inherited from <code>ggplot()</code> and <code>aes(y=xyz2)</code> is specified in the call. But <code>name</code> is not in <code>df1</code> so it throws an error.</li>
</ul>
<p>What’s a more robust way to write code when you have multiple data frames in the code? Here is one way, the data are clear and there is no danger of aesthetics being inherited.</p>
<pre class="r"><code>ggplot() + 
  geom_line(data=df2, aes(x=.data$abc, y=.data$xyz, color=name)) + 
  geom_point(data=df1, aes(x=.data$abc, y=xyz2))</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>On stackoverflow, the answers would say that you should avoid multiple data frames and put all the data in one data frame that you specify in <code>ggplot()</code>. In my experience, that is simply impractical. There are many cases where using multiple data frames is the best solution. BTW, I do try to avoid using multiple data frames in my ggplot code! That is a good policy, just not always efficient.</p>
</div>
<div id="facet-when-you-have-multiple-data-frames" class="section level3">
<h3><code>facet</code> when you have multiple data frames</h3>
<p>Note that without a data frame in <code>ggplot()</code>, <code>facet_...()</code> functions won’t work. You can add a data frame with the column name that you want to facet on, but the behavior might be non-intuitive. In this case, we have a data frame <code>df3</code> in <code>ggplot()</code> but it is not used elsewhere. The facet looks for any data frame that have the <code>name</code> column (<code>df2</code> does) and plots those in separate panels. <code>df1</code> doesn’t have <code>name</code> so it appears in every panel. This could be useful if there was a plot you needed to show in every panel and then other data that was separated across panels.</p>
<pre class="r"><code>library(patchwork)
library(ggplot2)
df1=data.frame(abc=1:5, xyz=1:5, name2=&quot;a&quot;)
df2=data.frame(abc=1:10, xyz=1:10, name=c(rep(letters[1:3],3),&quot;d&quot;))
df3=data.frame(name=&quot;a&quot;)
p1 &lt;- ggplot(df3) +
  geom_point(data=df1, aes(x=.data$abc, y=.data$xyz)) +
  geom_col(data=df2, aes(x=.data$abc, y=.data$xyz), alpha=0.5)
p1 + facet_wrap(~.data$name)</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Note to those who do R packages, you need to always use <code>.data</code> in <strong>ggplot2</strong> code even if you don’t have multiple data frames. Otherwise your package won’t pass <code>R CMD check</code>. So you have to write your calls like this:</p>
<pre><code>ggplot(df, aes(x=.data$abc, y=.data$xyz)) + geom_point()</code></pre>
</div>
<div id="another-example-of-inherit.aesfalse" class="section level3">
<h3>another example of <code>inherit.aes=FALSE</code></h3>
<p>Another option for making your code more robust, is to use <code>inherit.aes = FALSE</code> so that you don’t inadvertently inherit aesthetic information. That can help with bizarre behavior like this. I’m trying to get the plot on the right, but the one on the left is all wrong.</p>
<pre class="r"><code>library(patchwork)
library(ggplot2)
val &lt;- mtcars$mpg
x &lt;- mtcars$hp
df1 &lt;- data.frame(x=x, val=val, name=rep(letters[1:2],length(x)/2))
df2 &lt;- data.frame(x=x, val2=val+10)
df3 &lt;- data.frame(x=x+3, val=val-10, name=&quot;a&quot;)
p1 &lt;- ggplot(df3, aes(x=x, y=val, color=&quot;a&quot;)) +
  geom_point(data=df1, aes(x=x, y=val, color=name)) +
  geom_line(data=df2, aes(x=x, y=val)) + 
  ggtitle(&quot;Yipes&quot;)
p2 &lt;- ggplot(df3, aes(x=x, y=val, color=&quot;a&quot;)) +
  geom_point(data=df1, aes(x=x, y=val, color=name)) +
  geom_line(data=df2, aes(x=x, y=val), inherit.aes=FALSE) + 
  ggtitle(&quot;Correct&quot;)
p1 + p2</code></pre>
<p><img src="week5_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="more-info-on-setting-up-credentials-in-r-studio" class="section level3">
<h3>More info on setting up credentials in R Studio</h3>
<p>For those of you who want to connect R Studio to GitHub (so you can push to GitHub), here are some notes from the chat today. <em>You don’t need to do this if you use GitHub Desktop</em>; this is if you want to push to GitHub from within RStudio.</p>
<ul>
<li>the solution for me was generating a new ssh key to connect to github (<a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh" class="uri">https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh</a>)</li>
<li>and making sure my local repository was pointed to the origin through ssh rather than https (<a href="https://help.github.com/en/github/using-git/changing-a-remotes-url#switching-remote-urls-from-https-to-ssh" class="uri">https://help.github.com/en/github/using-git/changing-a-remotes-url#switching-remote-urls-from-https-to-ssh</a>).</li>
</ul>
<p>BTW, whenever I want to double check my repo origin, I open the file <code>config</code> in the <code>.git</code> folder. You’ll see your repo info listed there. Um, you change it here also and this is the first place I look if my repo is having trouble connecting to GitHub.</p>
</div>
</div>

<hr>

<div style="text-align: center">
<i class="fas fa-cubes"></i> NWFSC Math Bio Program <i class="fas fa-cubes"></i>
</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
